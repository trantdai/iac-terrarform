// WORK IN PROGRESS
provider "panos" {}

############################################################################################
# DEVICE GROUP IS ADDED MANUALLY VIA PANORAMA GUI BEFORE BOOTSTRAPING
############################################################################################

############################################################################################
# CONFIGURE PANOS PROVIDER AND NULL PROVIDER
############################################################################################

# Configure the panos provider
provider "panos" {
  version  = "~> 1.6"
  hostname = var.hostname
  username = var.username
  password = var.password
  api_key  = var.apikey
}

# Configure the null provider
provider "null" {
  version = "~> 2.1"
}

############################################################################################
# ADDRESS OBJECTS
############################################################################################

############################################################################################
# STATIC ADDRESS GROUP OBJECTS
############################################################################################

############################################################################################
# DYNAMIC ADDRESS GROUP OBJECTS
############################################################################################

############################################################################################
# SERVICE OBJECTS
############################################################################################

############################################################################################
# SERVICE GROUP OBJECTS
############################################################################################

############################################################################################
# SECURITY POLICY GROUP
############################################################################################

############################################################################################
# NAT POLICY GROUP
############################################################################################

############################################################################################
# ADD COMMIT NULL RESOURCE
############################################################################################

resource "null_resource" "commit_panorama" {
  provisioner "local-exec" {
    command = "./commit"
  }
  depends_on = [
    module.template.public_zone,
    module.template.private_zone,
    module.template.public_interface,
    module.template.private_interface,
  ]
}
